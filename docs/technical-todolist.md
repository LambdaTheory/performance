# 绩效管理系统技术任务清单 (MVP版本)

**系统定位**：管理员专用的绩效数据管理工具，无需权限控制

## 🔴 P0 - MVP核心功能（必须完成）

### 数据库设计（重新设计）
- [ ] 设计考核表管理表（assessment_forms）
  - 考核表ID、考核表名称、周期类型、创建时间、状态
- [ ] 设计绩效数据表结构（performance_data）
  - 考核表ID、员工姓名、员工工号、指标名称、指标值、创建时间、修改时间
- [ ] 创建数据库索引优化查询性能
- [ ] 编写数据库迁移脚本

### Excel文件导入功能
- [ ] 集成Excel解析库（xlsx或exceljs）
- [ ] 实现Excel文件上传组件
- [ ] 开发Excel数据解析和校验逻辑
- [ ] 实现数据批量写入数据库（按考核表导入）
- [ ] 添加导入进度显示
- [ ] 实现导入结果反馈（成功/失败条数）
- [ ] 添加导入完成提示弹窗

### 后端API开发（管理员功能）
- [ ] POST /api/performance/import - Excel考核表导入接口
- [ ] GET /api/performance/forms - 获取所有考核表列表
- [ ] GET /api/performance/employees - 获取所有员工列表
- [ ] GET /api/performance/employee/:name/latest - 获取员工最新考核数据
- [ ] PUT /api/performance/employee/:name/indicators - 修改员工指标
- [ ] GET /api/performance/employee/:name/history - 获取员工历史考核数据
- [ ] 实现文件上传处理中间件
- [ ] 添加数据校验和错误处理

### 前端管理界面
- [ ] 创建考核表导入页面
  - 文件选择组件
  - 考核表信息填写（名称、周期类型等）
  - 上传进度显示
  - 导入结果展示
- [ ] 创建考核表管理页面
  - 考核表列表展示
  - 考核表详情查看
- [ ] 创建员工选择组件（下拉框或搜索框）
- [ ] 创建员工绩效展示/编辑页面
  - 最新考核数据展示
  - 在线编辑功能
  - 保存按钮
- [ ] 创建员工历史绩效展示页面
  - 历史考核数据表格
  - 考核表切换功能
- [ ] 实现基础路由配置

### 数据逻辑调整
- **导入逻辑**：以考核表为单位导入，每次导入创建一个新的考核表记录
- **查看逻辑**：以员工为单位查看，可以看到该员工在不同考核表中的数据
- **修改逻辑**：修改员工在特定考核表中的指标数据
- **历史逻辑**：按考核表时间顺序展示员工的历史绩效

## 🟡 P1 - 重要功能（第二优先级）

### 数据可视化
- [ ] 集成图表库（Chart.js或ECharts）
- [ ] 实现历史绩效趋势图
  - 按考核表时间轴展示绩效变化
  - 不同考核表的对比分析
- [ ] 开发考核表时间轴组件
- [ ] 实现数据切换和筛选功能

### 外部接口（仅提供考核内容，不含结果）
- [ ] 设计RESTful API规范
- [ ] 实现员工绩效指标查询接口
  - GET /api/external/employee/:name/indicators - 获取员工最新考核指标（不含结果）
- [ ] 添加API认证机制（API Key）
- [ ] 编写API文档
- [ ] 实现接口限流和缓存

### 界面优化
- [ ] 实现数据加载状态指示器
- [ ] 添加操作确认弹窗
- [ ] 优化表格组件（分页、排序、搜索）
- [ ] 实现响应式设计
- [ ] 添加表单验证提示

## 🟢 P2 - 系统完善

### 数据管理
- [ ] 实现数据备份机制
- [ ] 添加操作日志记录
- [ ] 实现数据导出功能（Excel）
- [ ] 添加考核表删除功能
- [ ] 添加数据清理功能

### 性能优化
- [ ] 实现前端数据缓存
- [ ] 添加懒加载机制
- [ ] 优化大数据量渲染
- [ ] 实现虚拟滚动

## ❌ 不需要的功能

- ~~用户权限管理~~（单用户系统）
- ~~用户登录注册~~（管理员专用）
- ~~角色控制~~（无需权限控制）
- ~~员工同步功能~~（第二版本考虑）
- ~~绩效结果API~~（外部系统不能获取结果）

## 📋 技术栈

### 后端
- Node.js + Express（已有基础）
- Supabase（已配置）
- multer（文件上传）
- xlsx（Excel处理）

### 前端
- React（已有基础）
- Ant Design（UI组件库）
- Chart.js（图表）
- axios（HTTP请求）

## ⏱️ 开发周期

- **P0任务**: 3-4周
- **P1任务**: 2周  
- **P2任务**: 1周

**总计**: 5-6周

## 📝 待确认信息

请提供以下信息以开始开发：

1. **Excel文件格式**：具体的列名和数据结构
2. **考核表信息**：需要记录哪些考核表的元信息（名称、周期、部门等）
3. **绩效指标类型**：有哪些类型的指标需要管理
4. **员工标识**：使用姓名还是工号作为主要标识
5. **外部接口调用方**：哪些系统需要调用，需要什么格式的指标数据

---

*更新时间: $(date)*  
*版本: v5.0 (数据结构调整)*  
*状态: 等待Excel格式确认*